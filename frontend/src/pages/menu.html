<!DOCTYPE html>
<html lang="pt" data-bs-theme="dark" class="h-100">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="../css/style.css" rel="stylesheet">
</head>
<body>
  <header class="bg-body-secondary text-white p-4 d-flex justify-content-between">
    <div>
      <div id="header-nome-biblioteca" class="fs-5">Nome da Biblioteca</div>
      <div class="d-flex justify-content-start gap-1">
        <div id="header-nome-usuario" class="fs-6">Nome do Usuário</div>
        <div id="header-sobrenome-usuario" class="fs-6">Sobrenome do Usuário</div>
      </div>
    </div>
    <h1>Biblioteca Digital</h1>
  </header>
    <main>
        <!-- Modal de Cadastro de Biblioteca -->
        <div class="modal fade" id="modalCadastroBiblioteca" tabindex="-1" aria-labelledby="modalCadastroBibliotecaLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-white">
              <div class="modal-header">
                <h5 class="modal-title" id="modalCadastroBibliotecaLabel">Configurar Biblioteca</h5>
              </div>
              <div class="modal-body">
                <form id="form-cadastro-biblioteca">
                  <div class="mb-3">
                    <label for="nome-biblioteca" class="form-label">Nome da Biblioteca</label>
                    <input type="text" class="form-control" id="nome-biblioteca" required>
                  </div>
                  <div class="mb-3">
                    <label for="max-emprestimos" class="form-label">Máximo de Empréstimos</label>
                    <input type="number" class="form-control" id="max-emprestimos" required>
                  </div>
                  <div class="mb-3">
                    <label for="dias-tolerancia" class="form-label">Dias de Tolerância</label>
                    <input type="number" class="form-control" id="dias-tolerancia" required>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-light" id="salvarBiblioteca">Salvar</button>
              </div>
            </div>
          </div>
        </div>

        <div class="container-menu-nav">
            <div class="d-flex justify-content-start">
              <div class="nav flex-column nav-pills me-3" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                  <button class="nav-link active" id="v-pills-register-client-tab" data-bs-toggle="pill" data-bs-target="#v-pills-register-client" type="button" role="tab" aria-controls="v-pills-register-client" aria-selected="true">Cadastrar Cliente</button>
                  <button class="nav-link" id="v-pills-register-book-tab" data-bs-toggle="pill" data-bs-target="#v-pills-register-book" type="button" role="tab" aria-controls="v-pills-register-book" aria-selected="false">Cadastrar Livro</button>
                  <button class="nav-link" id="v-pills-view-books-tab" data-bs-toggle="pill" data-bs-target="#v-pills-view-books" type="button" role="tab" aria-controls="v-pills-view-books" aria-selected="false" onclick="carregarLivros()">Exibir Acervo de Livros</button>
                  <button class="nav-link" id="v-pills-view-clients-tab" data-bs-toggle="pill" data-bs-target="#v-pills-view-clients" type="button" role="tab" aria-controls="v-pills-view-clients" aria-selected="false" onclick="carregarClientes()">Exibir Todos os Clientes</button>
                  <button class="nav-link" id="v-pills-update-data-tab" data-bs-toggle="pill" data-bs-target="#v-pills-update-data" type="button" role="tab" aria-controls="v-pills-update-data" aria-selected="false">Atualizar Dados</button>
                  <button class="nav-link" id="v-pills-loan-book-tab" data-bs-toggle="pill" data-bs-target="#v-pills-loan-book" type="button" role="tab" aria-controls="v-pills-loan-book" aria-selected="false">Realizar Empréstimo</button>
                  <button class="nav-link" id="v-pills-return-book-tab" data-bs-toggle="pill" data-bs-target="#v-pills-return-book" type="button" role="tab" aria-controls="v-pills-return-book" aria-selected="false">Realizar Devolução</button>
                  <button class="nav-link" id="v-pills-account-settings-tab" data-bs-toggle="pill" data-bs-target="#v-pills-account-settings" type="button" role="tab" aria-controls="v-pills-account-settings" aria-selected="false">Configurações da Conta</button>
              </div>
          </div>
        </div>
        <div class="container-conteudo-menu">
          
          <!-- Cadastrar Cliente -->
          <div class="tab-content h-100" id="v-pills-tabContent">
            <div class="tab-pane fade show active h-100 background-cadastro-usuario" id="v-pills-register-client" role="tabpanel" aria-labelledby="v-pills-register-client-tab" tabindex="0">
              <div class="container-cadastro d-flex">
                <h1 class="p-4 text-center">Cadastro de Cliente</h1>
                <div class="mb-3">
                  <label for="cliente-nome" class="form-label">Nome</label>
                  <input type="text" class="form-control" id="cliente-nome">
                </div>
                <div class="mb-3">
                  <label for="cliente-sobrenome" class="form-label">Sobrenome</label>
                  <input type="text" class="form-control" id="cliente-sobrenome">
                </div>
                <div class="mb-3">
                  <label for="cliente-data-nascimento" class="form-label">Data de Nascimento</label>
                  <input type="date" class="form-control" id="cliente-data-nascimento">
                </div>
                <div class="mb-3">
                  <label for="cliente-cpf" class="form-label">CPF</label>
                  <input type="text" class="form-control" id="cliente-cpf" maxlength="14">
                </div>
                <div class="mb-3">
                  <label for="cliente-endereco" class="form-label">Endereço</label>
                  <input type="text" class="form-control" id="cliente-endereco">
                </div>
                <div class="mb-3">
                  <label for="cliente-telefone" class="form-label">Telefone</label>
                  <input type="text" class="form-control" id="cliente-telefone" maxlength="15">
                </div>
                <button type="button" class="btn btn-outline-success mb-3 w-30 mt-3" onclick="criarJSONCadastroCliente()">Cadastrar Cliente</button>
              </div>
            </div>

            <!-- Cadastrar Livro -->
            <div class="tab-pane fade background-cadastro-livro" id="v-pills-register-book" role="tabpanel" aria-labelledby="v-pills-register-book-tab" tabindex="0">
              <div class="container-cadastro-livro d-flex">
                <h1 class="p-4 text-center">Cadastro de Livro</h1>
                <div class="mb-3">
                  <label for="livro-titulo" class="form-label">Título do Livro</label>
                  <input type="text" class="form-control" id="livro-titulo" placeholder="Harry Potter, O Senhor dos Anéis, The Witcher, ...">
                </div>
                <div class="mb-3">
                  <label for="livro-categoria" class="form-label">Categoria do Livro</label>
                    <select class="form-select" id="livro-categoria">
                      <option selected disabled hidden value="">Categoria do livro</option>
                      <option value="1">Terror</option>
                      <option value="2">Ficção</option>
                      <option value="3">Romance</option>
                      <option value="4">Aventura</option>
                      <option value="5">Fantasia</option>
                      <option value="6">Suspense</option>
                      <option value="7">Biografia</option>
                      <option value="8">História</option>
                      <option value="9">Ciência</option>
                      <option value="10">Autoajuda</option>
                      <option value="11">Tecnologia</option>
                      <option value="12">Drama</option>
                      <option value="13">Poesia</option>
                      <option value="14">HQs e Mangás</option>
                      <option value="15">Infantil</option>
                      <option value="16">Didático</option>
                      <option value="17">Policial</option>
                    </select>
                </div>
                <div class="mb-3">
                  <label for="livro-quantidade" class="form-label">Quantidade do Livro</label>
                  <input type="number" class="form-control" id="livro-quantidade" placeholder="Quantidade a ser acrescentada no acervo">
                </div>
                <button type="button" class="btn btn-outline-success mb-3 w-30 mt-3" onclick="criarJSONCadastroLivro()">Cadastrar Livro</button>
              </div>
            </div>

            <!-- Atualizar Cliente ou Livro -->
            <div class="tab-pane fade background-update" id="v-pills-update-data" role="tabpanel" aria-labelledby="v-pills-update-data-tab" tabindex="0">
              <div class="mt-5 text-white container-atualizar-dados">
                <h2 class="mb-4 p-3">Atualizar Cliente ou Livro</h2>

                <div class="row g-5 justify-content-center">

                  <!-- Coluna: Atualizar Cliente -->
                  <div class="col-md-6">
                    <h5><strong>Atualizar Cliente</strong></h5>
                    <div class="d-flex gap-2 align-items-center flex-wrap">
                      <button class="btn btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#atualizarCliente" aria-expanded="false" aria-controls="atualizarCliente">
                        Atualizar Dados do Cliente
                      </button>
                      <input type="text" class="form-control" placeholder="Digite aqui o ID do Cliente" id="inputIdCliente" style="width: 300px;">
                    </div>
                    <div class="collapse mt-3" id="atualizarCliente">
                      <input type="text" class="form-control mb-2" placeholder="Novo Nome" id="inputNomeCliente">
                      <input type="text" class="form-control mb-2" placeholder="Novo Sobrenome" id="inputSobrenomeCliente">
                      <input type="date" class="form-control mb-2" placeholder="Nova Data de Nascimento" id="inputDataNascimentoCliente">
                      <input type="text" class="form-control mb-2" placeholder="Novo CPF" id="inputCpfCliente" maxlength="11">
                      <input type="text" class="form-control mb-2" placeholder="Novo Endereço" id="inputEnderecoCliente">
                      <input type="text" class="form-control mb-2" placeholder="Novo Telefone" id="inputTelefoneCliente" maxlength="11">
                      <button class="btn btn-success" onclick="atualizarCliente()">Salvar Alterações</button>
                    </div>
                  </div>

                  <!-- Coluna: Atualizar Livro -->
                  <div class="col-md-6">
                    <h5><strong>Atualizar Livro</strong></h5>
                    <div class="d-flex gap-2 align-items-center flex-wrap">
                      <button class="btn btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#atualizarLivro" aria-expanded="false" aria-controls="atualizarLivro">
                        Atualizar Dados do Livro
                      </button>
                      <input type="text" class="form-control" placeholder="Digite aqui o ID do Livro" id="inputIdLivro" style="width: 300px;">
                    </div>
                    <div class="collapse mt-3" id="atualizarLivro">
                      <input type="text" class="form-control mb-2" placeholder="Novo Título" id="inputTituloLivro">
                      <div class="mb-3">
                        <label for="livro-categoria" class="form-label">Categoria do Livro</label>
                          <select class="form-select" id="livro-categoria">
                            <option selected disabled hidden value="">Categoria do livro</option>
                            <option value="1">Terror</option>
                            <option value="2">Ficção</option>
                            <option value="3">Romance</option>
                            <option value="4">Aventura</option>
                            <option value="5">Fantasia</option>
                            <option value="6">Suspense</option>
                            <option value="7">Biografia</option>
                            <option value="8">História</option>
                            <option value="9">Ciência</option>
                            <option value="10">Autoajuda</option>
                            <option value="11">Tecnologia</option>
                            <option value="12">Drama</option>
                            <option value="13">Poesia</option>
                            <option value="14">HQs e Mangás</option>
                            <option value="15">Infantil</option>
                            <option value="16">Didático</option>
                            <option value="17">Policial</option>
                          </select>
                      </div>
                      <input type="number" class="form-control mb-2" placeholder="Nova Quantidade" id="inputQuantidadeLivro">
                      <input type="number" class="form-control mb-2" placeholder="Emprestados" id="inputEmprestadosLivro">
                      <button class="btn btn-success" onclick="atualizarLivro()">Salvar Alterações</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Exibir Acervo de Livros -->
            <div class="tab-pane fade background-exibir-livro" id="v-pills-view-books" role="tabpanel" aria-labelledby="v-pills-view-books-tab" tabindex="0">
              <h1 class="text-center p-3 fw-bold">Acervo de Livros</h1>
              <div class="d-flex justify-content-between align-items-center px-4 py-2" style="width: 100%;">
                <input type="text" class="form-control w-25 me-auto" placeholder="Digite aqui para pesquisar" id="input-pesquisa-livro">
                <input type="text" class="form-control w-25 ms-auto" placeholder="Insira o ID do livro para a exclusão" id="input-deletar-livro">
                <button class="btn btn-outline-danger" onclick='deletarEntidade("livros", "input-deletar-livro")'>Excluir livro</button>
              </div>  
              <div>
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">Id</th>
                      <th scope="col">Título</th>
                      <th scope="col">Categoria</th>
                      <th scope="col">Quantidade no Acervo</th>
                      <th scope="col">Emprestados</th>
                    </tr>
                  </thead>
                  <tbody id="tabela_livro" class="table-group-divider"></tbody>
                </table>
              </div>
            </div>

             <!-- Exibir Todos os Clientes -->
            <div class="tab-pane fade background-exibir-cliente" id="v-pills-view-clients" role="tabpanel" aria-labelledby="v-pills-view-clients-tab" tabindex="0">
              <h1 class="text-center p-3">Lista de Clientes</h1>
              <div class="d-flex justify-content-between align-items-center px-4 py-2" style="width: 100%;">
                <input type="text" class="form-control w-25 me-auto" placeholder="Digite aqui para pesquisar" id="input-pesquisa-cliente">
                <input type="text" class="form-control w-25 ms-auto" placeholder="Insira o ID do cliente para a exclusão" id="input-deletar-cliente">
                <button class="btn btn-outline-danger" onclick='deletarEntidade("clientes", "input-deletar-cliente")'>Excluir cliente</button>
              </div> 
              <div>
                <table class="table">
                  <thead>
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">Id</th>
                      <th scope="col">Nome</th>
                      <th scope="col">Sobrenome</th>
                      <th scope="col">Data de nascimento</th>
                      <th scope="col">Telefone</th>
                      <th scope="col">CPF</th>
                      <th scope="col">Endereço</th>
                      <th scope="col">Emprestimos</th>
                    </tr>
                  </thead>
                  <tbody id="tabela_cliente" class="table-group-divider"></tbody>
                </table>
              </div>
            </div>

            <!-- Realizar Empréstimo -->
            <div class="tab-pane fade background-emprestimo" id="v-pills-loan-book" role="tabpanel" aria-labelledby="v-pills-loan-book-tab" tabindex="0">
                <div class="container-emprestimo-devolucao d-flex">
                    <h1 class="text-center p-3">Realizar Empréstimo</h1>
                    <div class="mb-3">
                        <label for="livro-id" class="form-label">ID do Livro</label>
                        <input type="text" class="form-control" id="livro-id-emprestimo" placeholder="ID do livro">
                    </div>
                    <div class="mb-3">
                        <label for="usuario-id" class="form-label">ID do Usuário</label>
                        <input type="text" class="form-control" id="cliente-id-emprestimo" placeholder="ID do usuário">
                    </div>
                    <div class="mb-3">
                      <label for="livro-id" class="form-label">Data de devolução</label>
                      <input type="date" class="form-control" id="devolucao-data">
                    </div>
                    <button type="button" class="btn btn-outline-success mb-3 w-30 mt-3" onclick="criarJSONemprestimo()">Realizar Empréstimo</button>
                </div>
            </div>

            <!-- Realizar Devolução -->
            <div class="tab-pane fade background-devolucao" id="v-pills-return-book" role="tabpanel" aria-labelledby="v-pills-return-book-tab" tabindex="0">
                <div class="container-emprestimo-devolucao d-flex">
                    <h1 class="text-center p-3">Realizar Devolução</h1>
                    <div class="mb-3">
                        <label for="livro-id-devolucao" class="form-label">ID do Livro</label>
                        <input type="text" class="form-control" id="livro-id-devolucao" placeholder="ID do livro">
                    </div>
                    <div class="mb-3">
                        <label for="usuario-id-devolucao" class="form-label">ID do Cliente</label>
                        <input type="text" class="form-control" id="cliente-id-devolucao" placeholder="ID do usuário">
                    </div>
                    <button type="button" class="btn btn-outline-success mb-3 w-30 mt-3" onclick="criarJSONdevolucao()">Realizar Devolução</button>
                    <div id="mensagem-devolucao" class="alert alert-success mt-3" style="display: none;">
                        <strong>Devolução realizada!</strong>
                    </div>
                </div>
            </div>

            <div class="tab-pane fade background-biblioteca-config" id="v-pills-account-settings" role="tabpanel" aria-labelledby="v-pills-account-settings-tab" tabindex="0">
              <div class="container mt-6 text-white container-config-conta">
                <h2 class="mb-4 p-3">Configurações da Conta</h2>
            
                <div class="row">
                  <!-- COLUNA ESQUERDA -->
                  <div class="col-md-6">
                    <!-- Nome do Usuário -->
                    <div class="mb-4">
                      <p><strong>Nome do Usuário:</strong> <span id="nome-usuario-conta">Carregando...</span></p>
                      <button class="btn btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#editarNome" aria-expanded="false" aria-controls="editarNome">Editar Nome</button>
                      <div class="collapse mt-2" id="editarNome">
                        <input type="text" class="form-control mb-2" placeholder="Digite o novo nome" id="inputNome">
                        <input type="text" class="form-control mb-2" placeholder="Digite o novo sobrenome" id="inputsobreNome">
                        <button class="btn btn-success" onclick="atualizarConta()">Salvar</button>
                      </div>
                    </div>
            
                    <!-- E-mail -->
                    <div class="mb-4">
                      <p><strong>Email:</strong> <span id="email-usuario-conta">Carregando...</span></p>
                      <button class="btn btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#editarEmail" aria-expanded="false" aria-controls="editarEmail">Editar Email</button>
                      <div class="collapse mt-2" id="editarEmail">
                        <input type="email" class="form-control mb-2" placeholder="Digite o novo email" id="inputEmail">
                        <button class="btn btn-success" onclick="atualizarConta()">Salvar</button>
                      </div>
                    </div>
            
                    <!-- CPF -->
                    <div class="mb-4">
                      <p><strong>CPF:</strong> <span id="cpf-usuario-conta">Carregando...</span></p>
                      <button class="btn btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#editarCpf" aria-expanded="false" aria-controls="editarCpf">Editar CPF</button>
                      <div class="collapse mt-2" id="editarCpf">
                        <input type="text" class="form-control mb-2" placeholder="Digite o novo CPF" id="inputCpf" maxlength="11">
                        <button class="btn btn-success" onclick="atualizarConta()">Salvar</button>
                      </div>
                    </div>

                    <!-- Telefone -->
                    <div class="mb-4">
                      <p><strong>Telefone:</strong> <span id="telefone-usuario-conta">Carregando...</span></p>
                      <button class="btn btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#editarTel" aria-expanded="false" aria-controls="editarTel">Editar Telefone</button>
                      <div class="collapse mt-2" id="editarTel">
                        <input type="text" class="form-control mb-2" placeholder="Digite o novo telefone" id="inputTel" maxlength="11">
                        <button class="btn btn-success" onclick="atualizarConta()">Salvar</button>
                      </div>
                    </div>

                    <div>
                        <!-- Deletar Conta -->
                      <button type="button" class="btn btn-outline-danger mt-2" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                        Deletar Conta
                      </button>
                      
                      <!-- Modal -->
                      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h1 class="modal-title fs-5" id="staticBackdropLabel">Deletar Conta</h1>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                              Deseja realmente deletar a sua conta? Todos os seus dados serão excluídos.
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Cancelar</button>
                              <button type="button" class="btn btn-outline-danger" onclick="deletarConta()">Confirmar</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- COLUNA DIREITA -->
                  <div class="col-md-6">
                    <!-- Senha -->
                    <div class="mb-4">
                      <p><strong>Senha:</strong> ********</p>
                      <button class="btn btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#editarSenha" aria-expanded="false" aria-controls="editarSenha">Alterar Senha</button>
                      <div class="collapse mt-2" id="editarSenha">
                        <input type="password" class="form-control mb-2" placeholder="Digite a nova senha" id="inputSenha">
                        <input type="password" class="form-control mb-2" placeholder="Confirme a nova senha" id="inputConfirmarSenha">
                        <button class="btn btn-success" onclick="atualizarConta()">Salvar</button>
                      </div>
                    </div>
            
                    <!-- Nome da Biblioteca -->
                    <div class="mb-4">
                      <p><strong>Nome da Biblioteca:</strong> <span id="nome-biblioteca-conta">Carregando...</span></p>
                      <button class="btn btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#editarBiblioteca" aria-expanded="false" aria-controls="editarBiblioteca">Editar Nome da Biblioteca</button>
                      <div class="collapse mt-2" id="editarBiblioteca">
                        <input type="text" class="form-control mb-2" placeholder="Novo nome da biblioteca" id="inputBibliotecaNome">
                        <button class="btn btn-success" onclick="atualizarConta()">Salvar</button>
                      </div>
                    </div>
            
                    <!-- Políticas da Biblioteca -->
                    <div class="mb-4">
                      <p><strong>Políticas da Biblioteca:</strong></p>
                      <ul>
                        <li>Máx. dias: <span id="max-dias-biblioteca">-</span></li>
                        <li>Máx. empréstimos: <span id="max-livros-biblioteca">-</span></li>
                      </ul>
                      <button class="btn btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#editarPoliBiblioteca" aria-expanded="false" aria-controls="editarPoliBiblioteca">Editar Políticas</button>
                      <div class="collapse mt-2" id="editarPoliBiblioteca">
                        <input type="number" class="form-control mb-2" placeholder="Máximo de dias para devolução" id="inputMaxDias">
                        <input type="number" class="form-control mb-2" placeholder="Máximo de empréstimos" id="inputMaxLivros">
                        <button class="btn btn-success" onclick="atualizarConta()">Salvar</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
              </div>
            </div>
          </div>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="../js/script-menu-cadastro-cliente.js"></script>
    <script src="../js/script-menu-listar-cliente.js"></script>
    <script src="../js/script-menu-listar-livro.js"></script>
    <script src="../js/script-menu-cadastrar-livro.js"></script>
    <script src="../js/script-menu-emprestimo.js"></script>
    <script src="../js/script-menu-devolucao.js"></script>
    <script src="../js/script-menu-atualizar-livros.js"></script>
    <script src="../js/script-menu-atualizar-clientes.js"></script>
    <script src="../js/script-cadastro-biblioteca.js"></script>
    <script src="../js/script-configurar-conta.js"></script>
    <script src="../js/script-deletar-livro-cliente.js"></script>
</body>
</html>
